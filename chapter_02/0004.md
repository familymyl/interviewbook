# 关键字

[单个索引] [联合索引] [主键索引]

# 单个索引、联合索引、主键索引

# 参考解答
索引是对数据库表中一列或多列的值进行排序的一种结构，只有当经常查询索引列中的数据时，才需要在表上创建索引，使用索引可快速访问数据库表中的特定信息。索引占用磁盘空间，并且降低添加、删除和更新行的速度。当然索引也有好处就是查询速度快，它利还是大于弊的所以请慎重使用索引。
比如：一个学生表（t_stu）有1000条数据，给它id列建个主键和索引，你想查询id=1000；的这条信息，如果没有索引，它就一条一条的比对查找，系统运行1000次才找到，要是创建了索引，你查询id=1000的这条信息，系统只运行一次就找到了。可见，索引是用来定位的。

在关系数据库中，索引是一种与表有关的数据库结构，它可以使对应于表的SQL语句执行得更快。索引的作用相当于图书的目录，可以根据目录中的页码快速找到所需的内容。当表中有大量记录时，若要对表进行查询。
第一种搜索信息方式是全表搜索，是将所有记录一一取出，和查询条件进行一一对比，然后返回满足条件的记录，这样做会消耗大量数据库系统时间，并造成大量磁盘I/O操作；
第二种就是在表中建立索引，然后在索引中找到符合查询条件的索引值，最后通过保存在索引中的ROWID（相当于页码）快速找到表中对应的记录。

索引提供指向存储在表的指定列中的数据值的指针，然后根据指定的排序顺序对这些指针排序。数据库使用索引的方式与使用书籍中的索引的方式很相似：它搜索索引以找到特定值，然后顺指针找到包含该值的行。

在数据库关系图中，可以在选定表的“索引/键”属性页中创建、编辑或删除每个索引类型。当保存索引所附加到的表，或保存该表所在的关系图时，索引将保存在数据库中。

索引优点
1.大大加快数据的检索速度;
2.创建唯一性索引，保证数据库表中每一行数据的唯一性;
3.加速表和表之间的连接;
4.在使用分组和排序子句进行数据检索时，可以显著减少查询中分组和排序的时间。

索引缺点
1.索引需要占物理空间。
2.当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，降低了数据的维护速度。
在创建索引之前，您必须确定要使用哪些列以及要创建的索引类型。

* 普通索引：这是最基本的索引类型，而且它没有唯一性之类的限制。唯一任务是加快对数据的访问速度。

* 唯一索引：是不允许其中任何两行具有相同索引值的索引。当现有数据中存在重复的键值时，大多数数据库不允许将新创建的唯一索引与表一起保存。数据库还可能防止添加将在表中创建重复键值的新数据。
例如，如果在 employee 表中职员的姓 (lname) 上创建了唯一索引，则任何两个员工都不能同姓。

* 主键索引：数据库表经常有一列或列组合，其值唯一标识表中的每一行。该列称为表的主键。

主键分为复合主键和联合主键。

* 复合主键：就是指你表的主键含有一个以上的字段组成 。
例如：
```
create table test 
( 
   name varchar(19), 
   id number, 
   value varchar(10), 
   primary key (id,name) 
)
```
上面的id和name字段组合起来就是你test表的复合主键 （若其一为单索引字段时，左边的id才会有索引）
它的出现是因为你的name字段可能会出现重名，所以要加上ID字段这样就可以保证你记录的唯一性 ，一般情况下，主键的字段长度和字段数目要越少越好。 

* 联合主键：顾名思义就是多个主键联合形成一个主键组合，体现在联合。
(主键原则上是唯一的，别被唯一值所困扰。) 
索引可以极大的提高数据的查询速度，但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件。

简单的例子 
主键A跟主键B组成联合主键 
主键A跟主键B的数据可以完全相同(困扰吧，没关系)，联合就在于主键A跟主键B形成的联合主键是唯一的。 
下例主键A数据是1，主键B数据也是1，联合主键其实是11，这个11是唯一值，绝对不充许再出现11这个唯一值。(这就是多对多关系) 
主键A数据 主键B数据 
```
1　　　　　　1 
2　　　　　　2 
3　　　　　　3 
```
主键A与主键B的联合主键值最多也就是： 
```
11 12 13 
21 22 23 
31 32 33
```
* 联合索引又叫复合索引。两个或更多个列上的索引被称作复合索引。利用索引中的附加列，您可以缩小搜索的范围，但使用一个具有两列的索引，不同于使用两个单独的索引。复合索引的结构与电话簿类似，人名由姓和名构成，电话簿首先按姓氏对进行排序，然后按名字对有相同姓氏的人进行排序。如果您知道姓，电话簿将非常有用；如果您知道姓和名，电话簿则更为有用，但如果您只知道名不姓，电话簿将没有用处。所以说创建复合索引时，应该仔细考虑列的顺序。对索引中的所有列执行搜索或仅对前几列执行搜索时，复合索引非常有用；仅对后面的任意列执行搜索时，复合索引则没有用处。如：建立 姓名、年龄、性别的复合索引。




